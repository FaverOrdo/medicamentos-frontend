<div class="container mt-5">
  <div class="card shadow-sm rounded-3">
    <div class="card-header bg-primary text-white">
      <h5 class="mb-0">{{ esEdicion ? 'Editar Medicamento' : 'Agregar Medicamento' }}</h5>
    </div>
    <div class="card-body">
      <!-- Mostrar mensaje de éxito -->
      <div *ngIf="mensajeExito" class="alert alert-success text-center">
        {{ mensajeExito }}
      </div>

      <!-- Formulario con validaciones -->
      <form (ngSubmit)="guardarMedicamento()" #medicamentoForm="ngForm" class="row g-3">
        <div class="col-md-6">
          <label for="nombre" class="form-label">Nombre</label>
          <input
            type="text"
            id="nombre"
            class="form-control"
            [(ngModel)]="medicamento.nombre"
            name="nombre"
            #nombre="ngModel"
            required
          />
          <div *ngIf="nombre.invalid && nombre.touched" class="text-danger mt-1">
            <small *ngIf="nombre.errors?.required">El nombre es obligatorio.</small>
          </div>
        </div>

        <div class="col-md-6">
          <label for="descripcion" class="form-label">Descripción</label>
          <textarea
            id="descripcion"
            class="form-control"
            [(ngModel)]="medicamento.descripcion"
            name="descripcion"
            #descripcion="ngModel"
            required
          ></textarea>
          <div *ngIf="descripcion.invalid && descripcion.touched" class="text-danger mt-1">
            <small *ngIf="descripcion.errors?.required">La descripción es obligatoria.</small>
          </div>
        </div>

        <div class="col-md-6">
          <label for="precio" class="form-label">Precio</label>
          <input
            type="number"
            id="precio"
            class="form-control"
            [(ngModel)]="medicamento.precio"
            name="precio"
            #precio="ngModel"
            required
            min="0"
          />
          <div *ngIf="precio.invalid && precio.touched" class="text-danger mt-1">
            <small *ngIf="precio.errors?.required">El precio es obligatorio.</small>
            <small *ngIf="precio.errors?.min">El precio debe ser mayor o igual a 0.</small>
          </div>
        </div>

        <div class="col-md-6">
          <label for="cantidad" class="form-label">Cantidad</label>
          <input
            type="number"
            id="cantidad"
            class="form-control"
            [(ngModel)]="medicamento.cantidad"
            name="cantidad"
            #cantidad="ngModel"
            required
            min="0"
          />
          <div *ngIf="cantidad.invalid && cantidad.touched" class="text-danger mt-1">
            <small *ngIf="cantidad.errors?.required">La cantidad es obligatoria.</small>
            <small *ngIf="cantidad.errors?.min">La cantidad debe ser mayor o igual a 0.</small>
          </div>
        </div>

        <div class="d-flex justify-content-end gap-2 mt-4">
          <button
            type="submit"
            class="btn btn-primary"
            [disabled]="medicamentoForm.invalid"
          >
            {{ esEdicion ? 'Actualizar' : 'Guardar' }}
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            [routerLink]="'/medicamentos'"
          >
            Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
